// Author: Robert Davis

package configuration;

import java.sql.Connection;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.sql.DataSource;

// This class includes global configuration information.
public class Configuration {
    // The root directory of the project. This variable is put here by autoconf as a substitution
    // variable. There may be a better way to do this that doesn't require reconfiguring the
    // project whenever this file is modified.
    private static final String projectRoot = "@project_root@";

    public static String getProjectRoot() { return projectRoot; }

    // Returns a connect to the data source represented by the given resource name. If there is an
    // error, this returns null instead of throwing.
    public static Connection getDataConnection(String resourceName) {
        try {
            Context initialContext = new InitialContext();
            Context envContext = (Context)initialContext.lookup("java:comp/env");
            DataSource dataSource = (DataSource)envContext.lookup(resourceName);
            return dataSource.getConnection();
        } catch (Exception e) {
            System.out.println(e.getMessage());
            return null;
        }
    }
}
